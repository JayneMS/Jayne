<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>数据公海</title>

    <!-- Common plugins -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/simple-line-icons.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href="css/pace.css" rel="stylesheet">
    <link href="css/jasny-bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/nanoscroller.css">
    <link rel="stylesheet" href="css/metismenu.min.css">
    <!-- dataTables -->
    <link href="css/jquery.datatables.min.css" rel="stylesheet" type="text/css">
    <link href="css/responsive.bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="css/bootstrap-drawer.min.css" rel="stylesheet">
    <!--template css-->
    <link href="css/jquery-ui.css" rel="stylesheet">
    <link href="css/daterangepicker.css" rel="stylesheet">
    <link href="css/blue.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/jayne.css" rel="stylesheet">
    <link href="css/vlstyle.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
          <script src="js/html5shiv.min.js"></script>
          <script src="js/respond.min.js"></script>
        <![endif]-->

</head>

<body class="has-drawer">
    <div id="drawerExample" class="drawer  drawer-right dw-xs-10 dw-sm-6 dw-md-4 fold" aria-labelledby="drawerExample">
        <div class="drawer-controls">
           
        </div>
        <div class="drawer-contents">
            <div class="drawer-heading">
                <h2 class="drawer-title"></h2>
                <a href="#drawerExample" 
                   data-toggle="drawer" 
                   aria-foldedopen="false" 
                   aria-controls="drawerExample">
                    返回
                </a>
            </div>
            <div class="drawer-body">
               
            </div>
            <ul class="drawer-nav">
                
            </ul>
            <div class="drawer-footer">
               
            </div>
        </div>
    </div>
    <!--modal delete-->
    <div class="modal fade modal-delete" id="deleteModal" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <!--<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" class="fa fa-times-circle"></span></button>-->
                    <h4 class="modal-title" id="mySmallModalLabel">删除数据</h4>
                </div>
                <div class="modal-body">
                    删除的数据，可以再垃圾箱中查看。您确定要删除吗？
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary">确定</button>
                </div>
            </div>
        </div>
    </div>
    <!--end delete modal-->


    <!--main content start-->
    <section class="main-content">

        <!--page header start-->
        <div class="page-header">
            <div class="row">
                <div class="col-sm-6">
                    <h4>数据公海</h4>
                </div>
                <div class="col-sm-6 text-right">
                    <ol class="breadcrumb">
                        <li>
                            <a href="javascript: void(0);">
                                <i class="fa fa-home"></i>
                            </a>
                        </li>
                        <li>客户信息管理</li>
                        <li>数据公海</li>
                    </ol>
                </div>
            </div>
        </div>
        <!--page header end-->

        <!--page filter start-->
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-default collapsed">
                    <div class="panel-heading">
                        查询条件
                    </div>

                    <div class="panel-body">
                        <div class="row">
                            <div class="col-sm-3">
                                <fieldset class="jquery-Ui-fieldset">
                                    <label for="simple">请选择数据公海</label>
                                    <select name="simple" id="simple">
                                        <option selected="selected">全部公海</option>
                                        <option>移动公海</option>
                                        <option>五十五中</option>
                                        <option>建行公海</option>
                                        <option>联通公海</option>
                                    </select>
                                </fieldset>
                            </div>

                            <div class="col-sm-3">
                                <fieldset class="jquery-Ui-fieldset">
                                    <label for="batch">请选择批次</label>
                                    <select name="batch" id="batch">
                                        <option selected="selected">全部批次</option>
                                        <option>20180902122</option>
                                        <option>20180902122</option>
                                        <option>20180902122</option>
                                        <option>20180902122</option>
                                    </select>
                                </fieldset>
                            </div>

                            <div class="col-sm-3">
                                <fieldset class="jquery-Ui-fieldset">
                                    <label for="status">请选择状态</label>
                                    <select name="status" id="status">
                                        <option selected="selected">全部状态</option>
                                        <option>已分配</option>
                                        <option>未分配</option>
                                        <option>已处理</option>
                                        <option>再分配</option>
                                    </select>
                                </fieldset>
                            </div>
                            <div class="col-sm-3">

                            </div>

                        </div>

                        <div class="row">
                            <div class="col-sm-4">
                                <fieldset class="jquery-Ui-fieldset">
                                    <label for="status">请选择导入数据起止时间</label>
                                    <input name="daterange" type="text">
                                </fieldset>
                            </div>

                            <div class="col-sm-4">
                                <fieldset class="jquery-Ui-fieldset">
                                    <label for="status">快速筛选时间</label>
                                    <div class="i-checks vl-i-checks-inline m-r-10">
                                        <label>
                                            <input type="radio" value="todayOnly" name="a">
                                            <i></i> 仅今日导入 </label>
                                    </div>
                                    <div class="i-checks vl-i-checks-inline">
                                        <label>
                                            <input type="radio" checked="" value="weekLatest" name="a">
                                            <i></i> 近一周导入 </label>
                                    </div>
                                </fieldset>
                            </div>
                            <div class="col-sm-1">

                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <!--page filter end-->

        <!--start page content-->

        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-default collapsed">
                    <div class="panel-heading">
                        <p>当前批次： 移动数据-20180102122</p>
                        <div class="buttons">
                            <a id="selectAllBtn" class="btn btn-primary btn-border">全选</a>
                            <a href="javascript: void(0);" class="btn btn-primary">批量分配</a>
                            <div class="btn-group">
                                <button type="button" class="btn btn-teal dropdown-toggle" data-toggle="dropdown" aria-expanded="false">导入外呼
                                    <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu" role="menu">
                                    <li>
                                        <a href="#">预测外呼</a>
                                    </li>
                                    <li>
                                        <a href="#">自动外呼</a>
                                    </li>
                                </ul>
                            </div>
                            <a href="javascript: void(0);" class="btn btn-danger">批量删除</a>

                        </div>
                    </div>

                    <div class="panel-body">
                        <table id="datatable" class="table table-striped dt-responsive nowrap">
                            <thead>
                                <tr>
                                    <th>数据id</th>
                                    <th>所属公海</th>
                                    <th>批次</th>
                                    <th>当前状态</th>
                                    <th>导入时间</th>
                                    <th>最后操作时间</th>
                                    <th>导入者</th>
                                    <th>操作</th>
                                </tr>
                            </thead>

                            <tbody>
                                <tr>
                                    <td>2018002122212</td>
                                    <td>移动公海</td>
                                    <td>201800001</td>
                                    <td>未处理</td>
                                    <td>2018-1-1 16:02</td>
                                    <td>2018-2-1 09:01</td>
                                    <td>李小龙</td>
                                    <td class="td_operation">
                                        <a href="#" class="" data-toggle="modal" data-target="#publishModal" style="margin:5px;">分配</a>
                                        <a href="#drawerExample" data-toggle="drawer" aria-foldedopen="false" aria-controls="drawerExample" >查看</a>

                                        <a href="#" class="" data-toggle="modal" data-target="#deleteModal" style="margin:5px;">删除</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>2018002122212</td>
                                    <td>移动公海</td>
                                    <td>201800001</td>
                                    <td>未处理</td>
                                    <td>2018-1-1 16:02</td>
                                    <td>2018-2-1 09:01</td>
                                    <td>李小龙</td>
                                    <td class="td_operation">
                                        <a href="#" class="" data-toggle="modal" data-target="#publishModal" style="margin:5px;">分配</a>
                                        <a href="#drawerExample" data-toggle="drawer" aria-foldedopen="false" aria-controls="drawerExample" >查看</a>

                                        <a href="#" class="" data-toggle="modal" data-target="#deleteModal" style="margin:5px;">删除</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>2018002122212</td>
                                    <td>移动公海</td>
                                    <td>201800001</td>
                                    <td>未处理</td>
                                    <td>2018-1-1 16:02</td>
                                    <td>2018-2-1 09:01</td>
                                    <td>李小龙</td>
                                    <td>
                                        <a href="#" class="" data-toggle="modal" data-target="#publishModal" style="margin:5px;">分配</a>
                                        <a href="#drawerExample" data-toggle="drawer" aria-foldedopen="false" aria-controls="drawerExample" >查看</a>
                                     
                                        <a href="#" class="" data-toggle="modal" data-target=".modal-delete" style="margin:5px;">删除</a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!--end row-->



        <!--end page content-->


        <!--Start footer-->
        <footer class="footer">
            <span>Copyright &copy; </span>
        </footer>
        <!--end footer-->

    </section>
    <!--end main content-->



    <!--Common plugins-->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/pace.min.js"></script>
    <script src="js/jasny-bootstrap.min.js"></script>
    <script src="js/jquery.slimscroll.min.js"></script>
    <script src="js/jquery.nanoscroller.min.js"></script>
    <script src="js/metismenu.min.js"></script>
    <script src="js/float-custom.js"></script>


    <!--page script-->
    <script src="js/jquery.datatables.min.js"></script>
    <script src="js/datatables.responsive.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/jquery.ui.custom.js"></script>
    <script src="js/moment.min.js"></script>
    <script src="js/daterangepicker.js"></script>
    <script src="js/drawer.min.js"></script>
    <script src="js/jayne.js"></script>
    <!-- iCheck for radio and checkboxes -->
    <script src="js/icheck.min.js"></script>
    <script>
        $(document).ready(function () {
            var selected = []; //选择数组
            $('#datatable').dataTable();

            // 选择当前行，排除对于操作列的click监听
            $('#datatable tbody').on('click', "tr td:not('.td_operation')", function () {

                var $parent = $(this).parent()

                var id = $parent.id || $($parent).index()  // id 从server端获取
                var index = $.inArray(id, selected);

                if (index === -1) {
                    selected.push(id);
                } else {
                    selected.splice(index, 1);
                }

                $($parent).toggleClass('selected');

                btnOnSelected() // 监听是否全选，更改btn status

                console.log('选中行id或index:')
                console.log(selected)

            });

            // 全选与取消全选
            $('#selectAllBtn').click(function () {

                // flag 也可以用server选中后的id list 判断，同时在单条选中所有后，更新button状态
                var flag = $('#selectAllBtn').text() == '全选' ? true : false
                flag ?
                    $('#selectAllBtn').text('取消全选')
                    : $('#selectAllBtn').text('全选')

                $('#datatable tbody tr').each(function (i) {
                    flag ?
                        $(this).addClass('selected')
                        : $(this).removeClass('selected')
                })

            })

            function btnOnSelected() {
                if ($('tbody tr').not('.selected').length == 0) {
                    $('#selectAllBtn').text('取消全选')
                } else {
                    $('#selectAllBtn').text('全选')
                }
            }

            $("#batch").selectmenu(); //下拉菜单初始化
            $("#status").selectmenu();
            // radio添加class
            $('.i-checks').iCheck({
                checkboxClass: 'icheckbox_square-blue',
                radioClass: 'iradio_square-blue'
            });
            $('input[name="daterange"]').daterangepicker(
                {
                    locale: {
                        format: 'YYYY-MM-DD',
                        cancelLabel: '取消',
                        applyLabel: '选择',
                        "fromLabel": "从",
                        "toLabel": "至",
                        "customRangeLabel": "Custom",
                        "weekLabel": "周",
                        "daysOfWeek": [
                            "日",
                            "一",
                            "二",
                            "三",
                            "四",
                            "五",
                            "六"
                        ],
                        "monthNames": [
                            "一月",
                            "二月",
                            "三月",
                            "四月",
                            "五月",
                            "六月",
                            "七月",
                            "八月",
                            "九月",
                            "十月",
                            "十一月",
                            "十二月"
                        ],
                        "firstDay": 1
                    },
                    startDate: '2018-01-01',
                    endDate: moment()
                },
                function (start, end, label) {

                });

                // $("body").not($('.drawer')).on('click', function(){
                //     console.log('not')
                    
                //     $('.drawer').drawer('hide')
                
                   
                // })

                // $("html, body").click(function(e) {
                //     if ($(e.target).hasClass('drawer')) {
                //         return false;
                //     }
                //     console.log('d');
                // });

            //     $('#myDrawer').drawer({
                    //     toggle: false
                    // });


        });
    </script>

</body>

</html>