<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <title>口径录入</title>
        
        
        <!-- Common plugins -->
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/simple-line-icons.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/pace.css" rel="stylesheet">
        <link href="css/jasny-bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="css/nanoscroller.css">
        <link rel="stylesheet" href="css/metismenu.min.css">
        <!--wysihtml5-->
        <link href="css/bootstrap-wysihtml5.css" rel="stylesheet">
        <link href="css/summernote.css" rel="stylesheet">
        <link href="css/summernote-bs3.css" rel="stylesheet">
        <!-- dataTables -->
        <link href="css/jquery.datatables.min.css" rel="stylesheet" type="text/css">
        <link href="css/responsive.bootstrap.min.css" rel="stylesheet" type="text/css">
        <!-- Treeview css -->
        <link href="css/style_1.css" rel="stylesheet" type="text/css" />
        <!--sweetalert css-->
        <link href="css/sweet-alert.css" rel="stylesheet">
        <!--template css-->
	    <link href="css/jquery-ui.css" rel="stylesheet">
	
	    <link href="css/blue.css" rel="stylesheet">
	    <link href="css/switch.css" rel="stylesheet">
        <link href="css/style.css" rel="stylesheet">
        <link href="css/jayne.css" rel="stylesheet">
	    <link href="css/vlstyle.css" rel="stylesheet">
	    <link rel="stylesheet" href="css/timeline.css">
        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="js/html5shiv.min.js"></script>
          <script src="js/respond.min.js"></script>
        <![endif]-->
    </head>
    <body>

        <!--modal create-role start-->
        <div class="modal fade" data-backdrop="static" id="createModal" tabindex="-1" role="dialog" aria-labelledby="createModal">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" class="fa fa-times-circle"></span></button>
                        <h3 class="modal-title" id="myModalLabel">新建数据来源</h3>
                    </div>
                    <div class="modal-body">
                        <div class="modal-form">
                            <form role="form">
                                <div class="form-group">
	                                <label>来源名称</label>
                                    <input type="email" class="form-control" name="name" required="">
                                </div>
                                <div class="form-group">
	                                <label>分配规则</label>
	                                <select name="role" class="form-control" >
	                                	<option>平均规则</option>
	                                	<option>坐席分配规则</option>
	                                </select>
                                </div>
                                <div class="form-group">
	                                <label>关联口径</label>
	                                <select name="caliber" class="form-control" >
	                                	<option>移动口径1</option>
	                                	<option>移动口径2</option>
	                                	<option>联通口径1</option>
	                                	<option>建行口径1</option>
	                                </select>
                                </div>
                                <div class="clearfix modal-footer no-border">
                        			<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                                    <button type="submit" class="btn  btn-primary pull-right" onclick="add_tab()">创建</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--modal create-role end-->
        <!--modal update-role start-->
        <div class="modal fade" data-backdrop="static" id="updateModal" tabindex="-1" role="dialog" aria-labelledby="updateModal">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" class="fa fa-times-circle"></span></button>
                        <h3 class="modal-title" id="myModalLabel">修改数据来源</h3>
                    </div>
                    <div class="modal-body">
                        <div class="modal-form">
                            <form role="form">
                                <div class="form-group">
	                                <label>来源名称</label>
                                    <input class="form-control" name="al_name"  required="">
                                </div>
                                <div class="form-group">
	                                <label>分配规则</label>
	                                <select name="al_role" class="form-control" >
	                                	<option>平均规则</option>
	                                	<option>坐席分配规则</option>
	                                </select>
                                </div>
                                <div class="form-group">
	                                <label>关联口径</label>
	                                <select name="al_caliber" class="form-control" >
	                                	<option>移动口径1</option>
	                                	<option>移动口径2</option>
	                                	<option>联通口径1</option>
	                                	<option>建行口径1</option>
	                                </select>
                                </div>
                                <div class="clearfix modal-footer no-border">
                        			<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                                    <a  class="btn  btn-primary pull-right" onclick="alter_tab()">提交</a>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--modal update-role end-->

        <!--modal delete-->
        <div class="modal fade modal-delete" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
            <div class="modal-dialog modal-sm" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <!--<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" class="fa fa-times-circle"></span></button>-->
                        <h4 class="modal-title" id="mySmallModalLabel">删除数据来源</h4>
                    </div>
                    <div class="modal-body">
                    	您确定要删除此数据来源吗？
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                        <button type="button" class="btn btn-primary">确定</button>
                    </div>
                </div>
            </div>
        </div>
        <!--end delete modal-->
        
        <!--main content start-->
        <section class="main-content">

            <!--page header start-->
            <div class="page-header">
                <div class="row">
                    <div class="col-sm-6 flex-align-center">
                        <h4 class="inline">口径录入</h4>
                    </div>
                    <div class="col-sm-6 text-right">
                        <ol class="breadcrumb">
                            <li><a href="javascript: void(0);"><i class="fa fa-home"></i></a></li>
                            <li>系统设置</li>
                            <li>口径录入</li>
                        </ol>
                    </div>
                </div>
            </div>
            <!--page header end-->

	        <!--page filter start-->
	        <div class="row">
	            <div class="col-md-12">
	                <div class="panel panel-default collapsed">
	                    <div class="panel-heading">
	                        <p class="inline">查询条件</p>
	                        <a class="vl-a" id="resetBtn">重置查询条件</a>
	                    </div>
	                    <div class="panel-body">
	                        <div class="row">
	
	                            <div class="col-sm-3">
	                                <fieldset class="jquery-Ui-fieldset">
	                                    <label for="uid">知识库</label>
	                                    <input class="input-150p black" type="" name="library" id="library" value="" />
	                                </fieldset>
	                            </div>
	
	                            <div class="col-sm-3">
	                                <fieldset class="jquery-Ui-fieldset">
	                                    <label for="uname">关键词</label>
	                                    <input class="input-150p black" type="" name="key" id="key" value="" />
	                                </fieldset>
	                            </div>
	                        </div>
	                        <a href="javascript: void(0);" class="btn btn-primary inline float-right" onclick="search_tab()">开始查询</a>
	                    </div>
	
	                </div>
	            </div>
	        </div>
	        <!--page filter end-->
        
            <!--start page content-->
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default collapsed">
	                    <div class="panel-heading">
	                        <div class="buttons">
	                            <a id="selectAllBtn" class="btn btn-primary btn-border">全选</a>
	                            <a href="javascript: void(0);" class="btn btn-primary" data-toggle="modal" data-target="#createModal">新增</a>
	                            <a href="javascript: void(0);" class="btn btn-teal" data-toggle="modal" data-target="#updateModal">修改</a>
	                            <a href="javascript: void(0);" class="btn btn-danger" onclick="delete_r()">删除</a>
	                        </div>
	                    </div>
                        <div class="panel-body">
                            <table id="datatable" class="table table-striped dt-responsive nowrap">
                                <thead>
                                    <tr>
                                        <th>知识库</th>
                                        <th>关键词</th>
                                        <th>类型</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                    	<td>移动套餐</td>
                                    	<td>移动、销售</td>
                                    	<td>
	                                    	<select class="choose-type width-100p" name="">
	                                    		<option class="choose-text" value=""></option>
	                                    		<option class="choose-text" value="文本">文本</option>
	                                    		<option class="choose-survey" value="调查">调查</option>
	                                    	</select>
                                    	</td>
                                    </tr>
                                    <tr>
                                    	<td>联通客户调查</td>
                                    	<td>联通</td>
                                    	<td>
	                                    	<select class="choose-type width-100p" name="">
	                                    		<option class="choose-text" value=""></option>
	                                    		<option class="choose-text" value="文本">文本</option>
	                                    		<option class="choose-survey" value="调查">调查</option>
	                                    	</select>
                                    	</td>
                                    </tr>
                                    <tr>
                                    	<td>海尔XXX部门</td>
                                    	<td>海尔</td>
                                    	<td>
	                                    	<select class="choose-type width-100p" name="">
	                                    		<option class="choose-text" value=""></option>
	                                    		<option class="choose-text" value="文本">文本</option>
	                                    		<option class="choose-survey" value="调查">调查</option>
	                                    	</select>
                                    	</td>
                                    </tr>
                                    <tr>
                                    	<td>海尔XXX部门</td>
                                    	<td>海尔</td>
                                    	<td>
	                                    	<select class="choose-type width-100p" name="">
	                                    		<option class="choose-text" value=""></option>
	                                    		<option class="choose-text" value="文本">文本</option>
	                                    		<option class="choose-survey" value="调查">调查</option>
	                                    	</select>
                                    	</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div><!--end row-->
            
            <div class="tabs">
	            <div class="row " id="texttype" style="display: none;">
	                <div class="col-sm-12">
	                    <div class="panel panel-default">
	                        <div class="panel-heading">
	                            <!--Summernote Standard editor-->
	                        </div>
	                        <div class="panel-body">
	                            <div class="summernote">
	                            </div>
	                        </div>
                        	<a href="#" class="btn btn-sm btn-primary  width-100p" style="margin:5px;margin-left: 45%;">保存</a>
	                    </div>
	                </div>
	            </div>
            	<div class="row" id="surveytype" style="display: none;">
	                <div class="col-sm-12">
	                    <div class="panel panel-default">
	                        <div class="panel-heading">
	                        	联通客户调查
	                        </div>
	                        <div class="panel-body scroll-div">
	                        	1.您在xxxx?
	                        	<br />
	                        	A.是&nbsp;&nbsp;B.否
	                        	<br />
	                        	2.您使用我们的套餐是否满意
	                        	<br />
	                        	A.满意&nbsp;&nbsp;B.不满意
	                        </div>
                        	<a href="#" class="btn btn-sm btn-primary  width-100p" style="margin:5px;margin-left: 45%;">保存</a>
	                    </div>
	                </div>
	            </div>
    		</div>
            
            <!--end page content-->


            <!--Start footer-->
            <footer class="footer">
                <span>Copyright &copy; </span>
            </footer>
            <!--end footer-->

        </section>
        <!--end main content-->


        <!--Common plugins-->
        <script src="js/jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/pace.min.js"></script>
        <script src="js/jasny-bootstrap.min.js"></script>
        <script src="js/jquery.slimscroll.min.js"></script>
        <script src="js/jquery.nanoscroller.min.js"></script>
        <script src="js/metismenu.min.js"></script>
        <script src="js/float-custom.js"></script>
        <script src="js/jquery.datatables.min.js"></script>
        <script src="js/datatables.responsive.min.js"></script>
        <!--page script-->
	    <script src="js/jquery-ui.min.js"></script>
	    <script src="js/jquery.ui.custom.js"></script>
	    <script src="js/jayne.js"></script>
	    <script src="js/drawer.js"></script>

        <!--editor wysihtml5 and summernote-->
        <script src="js/wysihtml5-0.3.0.js"></script>
        <script src="js/bootstrap-wysihtml5.js"></script>
        <script src="js/summernote.min.js"></script>
	    <!--sweet alerts-->
	    <script src="js/sweet-alert.min.js"></script>
	    <!-- iCheck for radio and checkboxes -->
	    <script src="js/icheck.min.js"></script>
	    <script src="js/switch.js"></script>

        <script>
        	
        	
        var selected = [];//选择数组
        //筛选查询条件
        function search_tab() {
            var library = $('#library').val().trim();
            var key = $('#key').val().trim();
            alert(library);
            alert(key);
            //此处添加查询方法
        }

        //新增
        function add_tab() {
            var name = $("input[name='name']").val().trim();
            var role = $("select[name='role']").val();
            var caliber = $("select[name='caliber']").val();
            alert(name);
            alert(role);
            alert(caliber);
            //此处添加新增方法
        }

        //修改
        function alter_tab() {
            var al_name = $("input[name='al_name']").val().trim();
            var al_role = $("select[name='al_role']").val();
            var al_caliber = $("select[name='al_caliber']").val();
//            			alert(al_name);
//            			alert(al_role);
//            			alert(al_caliber);
            var count = 0;
            for (var i in selected) {
                var row = selected[i] + 1;
                var rows = $('#datatable tr').eq(row).find("td").eq(0).text();
                count++;
                console.log(rows);
            };
            if (count == 0) {
                swal({
                    title: '修改至少选中一行',
                    timer: 1000,
                    showConfirmButton: false
                });
            } else if (count > 1) {
                swal({
                    title: '修改不可选中多行',
                    timer: 1000,
                    showConfirmButton: false
                });
            } else {
                //此处添加修改方法
            }

        }

        //删除
        function delete_r() {
            var count = 0;
            for (var i in selected) {
                var row = selected[i] + 1;
                var rows = $('#datatable tr').eq(row).find("td").eq(0).text();
                count++;
            };
            if (count == 0) {
                swal({
                    title: '删除至少选中一行',
                    timer: 1000,
                    showConfirmButton: false
                });
            } else {
                swal({
                    title: "确定删除吗？",
                    type: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#DD6B55",
                    confirmButtonText: "确定！",
                    cancelButtonText: '取消',
                    closeOnConfirm: false
                },
                    function () {
                        //此处添加删除方法,如果删除成功执行：
                        swal(
                            "删除！", "已经被删除。", "success"
                        );
                        console.log(selected);
                        for (var i in selected) {
                            var row = selected[i] + 1;
                            var rows = $('#datatable tr').eq(row).find("td").eq(0).text();
                            count++;
                            $('#datatable').find("tr").eq(row).css('display', 'none');
                        };
                        for (var i in selected) {
                            selected.splice(i);
                        };
                    });
            }

        }

        $(document).ready(function () {
            $('#datatable').dataTable();


			//重置全部选择
            $('#resetBtn').click(function () {
                resetFilter()
            })

            function resetFilter() {

                $('input[name="library"]').val('')
                $('input[name="key"]').val('')
            }
            
            // 选择当前行，排除对于操作列的click监听
            $('#datatable tbody').on('click', "tr", function () {

                var id = $(this).index();  // id 从server端获取

                var index = $.inArray(id, selected);

                if (index === -1) {
                    selected.push(id);
                } else {
                    selected.splice(index, 1);
                }

                $(this).toggleClass('selected');

                btnOnSelected(); // 监听是否全选，更改btn status

            });

            // 全选与取消全选
            $('#selectAllBtn').click(function () {

                // flag 也可以用server选中后的id list 判断，同时在单条选中所有后，更新button状态
                var flag = $('#selectAllBtn').text() == '全选' ? true : false
                flag ?
                    $('#selectAllBtn').text('取消全选')
                    : $('#selectAllBtn').text('全选')

                $('#datatable tbody tr').each(function (i) {
                    flag ?
                        $(this).addClass('selected')
                        : $(this).removeClass('selected')
                })

            })

            function btnOnSelected() {
                if ($('tbody tr').not('.selected').length == 0) {
                    $('#selectAllBtn').text('取消全选')
                } else {
                    $('#selectAllBtn').text('全选')
                }
            }

            // radio添加class
            $('.i-checks').iCheck({
                checkboxClass: 'icheckbox_square-blue',
                radioClass: 'iradio_square-blue'
            });

            var els = document.querySelectorAll('.checkbox-switch');
            var options = {
                size: 'small',
                checked: true,
                onText: '正常',
                offText: '离职/休假/未到岗',
                onInit: function () { },
                onChange: function () { },
                onRemove: function () { },
            };

            els.forEach(function (el) {
                new Switch(el, options);
            })

        });

            
            $(document).ready(function () {
                //wysihtml5
                $('#textarea').wysihtml5({});
                
                //summernote
                $(function () {
                    // Initialize summernote plugin
                    $('.summernote').summernote();

                    var sHTML = $('.summernote').code();

                    console.log(sHTML);

                    $('.summernote1').summernote({
                        toolbar: [
                            ['headline', ['style']],
                            ['style', ['bold', 'italic', 'underline', 'superscript', 'subscript', 'strikethrough', 'clear']],
                            ['textsize', ['fontsize']],
                            ['alignment', ['ul', 'ol', 'paragraph', 'lineheight']]
                        ]
                    });

                    $('.summernote2').summernote({
                        airMode: true
                    });

                });
                
			    
			    $('.choose-type').change(function(e){
			    	if($(this).val()=='文本'){
			    		$('#texttype').css('display','block');
			    		$('#surveytype').css('display','none');
			    	}else if($(this).val()=='调查'){
			    		$('#texttype').css('display','none');
			    		$('#surveytype').css('display','block');	
			    	}
			    });
            });
			 

        </script>

    </body>
</html>
